<style>
   
    .nav-sidebar .nav-link.active {
        background-color: #28a745 !important; 
        color: #ffffff !important;
        font-weight: 500;
    }

       
        .nav-sidebar .nav-link.active i,
        .nav-sidebar .nav-link.active p {
            color: #ffffff !important;
        }

       
        .nav-sidebar .nav-link.active:focus,
        .nav-sidebar .nav-link.active:active {
            background-color: #e6f7f0 !important; 
            color: #1DBF73 !important;
        }

     
        .nav-sidebar .nav-link.active:hover {
            background-color: #e6f7f0 !important; 
            color: #1DBF73 !important;
        }

           
            .nav-sidebar .nav-link.active:hover i,
            .nav-sidebar .nav-link.active:hover p {
                color: #1DBF73 !important;
            }

  
    .nav-sidebar .nav-treeview .nav-link {
        color: #ffffff; 
        background-color: transparent; 
        transition: background-color 0.3s, color 0.3s;
    }

       
        .nav-sidebar .nav-treeview .nav-link:hover {
            background-color: #28a745 !important; 
            color: #ffffff !important; 
        }

       
        .nav-sidebar .nav-treeview .nav-link.active {
            background-color: #198754 !important; 
            color: #ffffff !important;
        }

       
        .nav-sidebar .nav-treeview .nav-link .nav-icon {
            color: #ffffff !important;
        }

      
        .nav-sidebar .nav-treeview .nav-link:focus,
        .nav-sidebar .nav-treeview .nav-link:active {
            background-color: #28a745 !important;
            color: #ffffff !important;
        }

    .nav-sidebar .nav-treeview .nav-link {
        color: black !important;
        background-color: #ffffff !important;
    }

        .nav-sidebar .nav-treeview .nav-link .nav-icon {
            color: #000000 !important; 
        }

        .nav-sidebar .nav-treeview .nav-link:hover .nav-icon {
            color: #ffffff !important; 
        }
</style>

@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();

    bool IsController(params string[] controllers) => controllers.Contains(currentController);

    bool IsControllerActionStartsWith(string controller, string actionPrefix) =>
        currentController == controller && currentAction.StartsWith(actionPrefix, StringComparison.OrdinalIgnoreCase);
}

<nav class="mt-2">
    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">

        <!-- Admin Dashboard -->
        <li class="nav-item">
            <a asp-controller="Admin" asp-action="Dashboard"
               class="nav-link @(IsController("Admin") && currentAction.StartsWith("Dashboard") ? "active" : "")">
                <i class="nav-icon fas fa-tachometer-alt"></i>
                <p>Dashboard</p>
            </a>
        </li>

        <!-- Manage Users -->
        <li class="nav-item">
            <a asp-controller="Admin" asp-action="ManageUsers"
               class="nav-link @(IsController("Admin") && currentAction.StartsWith("ManageUsers") ? "active" : "")">
                <i class="nav-icon fas fa-users-cog"></i>
                <p>Manage Users</p>
            </a>
        </li>

        <!-- Manage Routes -->
        <!-- <li class="nav-item">
            <a asp-controller="Route" asp-action="Index"
               class="nav-link @(IsController("Route") ? "active" : "")">
                <i class="nav-icon fas fa-route"></i>
                <p>Manage Bus Routes</p>
            </a>
        </li> -->
        <!-- Manage Schedules -->
        <li class="nav-item">
            <a asp-controller="Schedule" asp-action="Index"
               class="nav-link @(IsController("Schedule") ? "active" : "")">
                <i class="nav-icon fas fa-calendar-alt"></i>
                <p>Manage Bus Schedules</p>
            </a>
        </li>

        <!-- Manage Vehicles Dropdown -->
        @{
            bool isManageVehiclesActive =
            IsController("Bus", "Air", "Train", "Launch") ||
            IsControllerActionStartsWith("Admin", "ManageBuses");
        }
        <li class="nav-item text-success has-treeview @(isManageVehiclesActive ? "menu-open" : "")">
            <a href="#" class="nav-link @(isManageVehiclesActive ? "active" : "")">
                <i class="nav-icon fas fa-bus"></i>
                <p>
                    Manage Vehicles
                    <i class="right fas fa-angle-left"></i>
                </p>
            </a>
            <ul class="nav nav-treeview">
                <li class="nav-item">
                    <a asp-controller="Admin" asp-action="ManageBuses"
                       class="nav-link @(IsControllerActionStartsWith("Admin", "ManageBuses") ? "active" : "")">
                        <i class="fas fa-bus nav-icon text-black"></i>
                        <p>Manage Bus</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a asp-controller="Air" asp-action="Index"
                       class="nav-link @(IsController("Air") ? "active" : "")">
                        <i class="fas fa-plane nav-icon text-black"></i>
                        <p>Manage Air</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a asp-controller="Train" asp-action="Index"
                       class="nav-link @(IsController("Train") ? "active" : "")">
                        <i class="fas fa-train nav-icon text-black"></i>
                        <p>Manage Train</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a asp-controller="Launch" asp-action="Index"
                       class="nav-link @(IsController("Launch") ? "active" : "")">
                        <i class="fas fa-ship nav-icon text-black"></i>
                        <p>Manage Launch</p>
                    </a>
                </li>
            </ul>
        </li>

        <!-- Manage Operators -->
        <li class="nav-item">
            <a asp-controller="UserManagement" asp-action="Operator"
               class="nav-link @(IsController("UserManagement") && currentAction.StartsWith("Operator") ? "active" : "")">
                <i class="nav-icon fas fa-user-tie"></i>
                <p>Manage Operators</p>
            </a>
        </li>

        <!-- Booked Tickets -->
        <li class="nav-item">
            <a asp-controller="AdminTickets" asp-action="Index"
               class="nav-link @(IsController("AdminTickets") ? "active" : "")">
                <i class="nav-icon fas fa-ticket-alt"></i>
                <p>Manage Tickets</p>
            </a>
        </li>

        <!-- Customers -->
        <li class="nav-item">
            <a asp-controller="UserManagement" asp-action="Index"
               class="nav-link @(IsController("UserManagement") && currentAction.StartsWith("Index") ? "active" : "")">
                <i class="nav-icon fas fa-users"></i>
                <p>Customers</p>
            </a>
        </li>

        <!-- Reports -->
        <li class="nav-item">
            <a asp-controller="Report" asp-action="Index"
               class="nav-link @(IsController("Report") ? "active" : "")">
                <i class="nav-icon fas fa-chart-bar"></i>
                <p>Reports</p>
            </a>
        </li>

        <!-- Send Notifications -->
        <li class="nav-item">
            <a asp-controller="Admin" asp-action="SendEmail"
               class="nav-link @(IsController("Admin") && currentAction.StartsWith("SendEmail") ? "active" : "")">
                <i class="nav-icon fas fa-envelope"></i>
                <p>Send Messages</p>
            </a>
        </li>
        <li class="nav-item">
            <a asp-controller="AdminMessages" asp-action="Index"
               class="nav-link @(IsController("AdminMessages") && currentAction.StartsWith("Index") ? "active" : "")">
                <i class="nav-icon fas fa-inbox"></i>
                <p> Get Messages</p>
            </a>
        </li>

        <!-- Logout -->
        <li class="nav-item mt-3">
            <form asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home")" method="post">
                <button type="submit" class="nav-link btn btn-link text-left text-success w-100">
                    <i class="nav-icon fas fa-sign-out-alt"></i>
                    <p>Logout</p>
                </button>
            </form>
        </li>
    </ul>
</nav>
