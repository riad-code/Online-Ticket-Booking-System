@model ONLINE_TICKET_BOOKING_SYSTEM.Models.Air.Airline
@{
    ViewData["Title"] = "Edit Airline";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<h3>Edit Airline</h3>

<form id="form" method="post" action="/Airlines/Edit/@Model.Id">
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="Id" />
    <div class="mb-3">
        <label class="form-label">IATA Code (2 letters)</label>
        <input asp-for="IataCode" class="form-control" />
        <span asp-validation-for="IataCode" class="text-danger"></span>
    </div>
    <div class="mb-3">
        <label class="form-label">Airline Name</label>
        <input asp-for="Name" class="form-control" />
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>
    <button class="btn btn-primary" type="submit">Update</button>
    <a class="btn btn-secondary" href="/Airlines/Index">Back</a>
</form>

<script>
    $("#form").on("submit", function (e) {
        e.preventDefault();
        const $f = $(this);
        Swal.fire({ title: "Updating...", allowOutsideClick: false, didOpen: () => Swal.showLoading() });
        $.ajax({
            url: $f.attr("action"),
            method: "POST",
            data: $f.serialize()
        }).done(() => {
            Swal.fire({ icon: "success", title: "Updated" })
                .then(() => window.location = "/Airlines/Index");
        }).fail((xhr) => {
            Swal.fire({ icon: "error", title: "Failed", text: xhr.responseText || "Error" });
        });
    });
</script>
