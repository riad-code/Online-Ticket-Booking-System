@model IEnumerable<ONLINE_TICKET_BOOKING_SYSTEM.Models.Air.Airport>
@{
    ViewData["Title"] = "Air Tickets";
    Layout = "_Layout";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" />
<style>
    :root {
        --brand: #1faa00;
        --brand6: #148a00;
        --brand50: #e7f6e8;
    }

    .air-hero {
        position: relative;
        background: url('/Admin/images/air-hero.jpg') center/cover no-repeat;
        height: 420px
    }

    .air-hero {
        position: relative;
    }

        .air-hero:after {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,.35);
            z-index: 1; /* put the overlay UNDER the card */
            pointer-events: none; /* overlay never catches clicks */
        }

    .air-card {
        position: absolute;
        left: 50%;
        bottom: 24px;
        transform: translateX(-50%);
        width: min(1100px,92%);
        background: #fff;
        border-radius: 22px;
        box-shadow: 0 10px 30px rgba(0,0,0,.15);
        padding: 18px 18px 22px;
        border: 1px solid #eef2ff;
        z-index: 2; /* ensure the card is above the overlay */
    }


    .toggle {
        display: flex;
        gap: 18px;
        margin-bottom: 10px
    }

        .toggle label {
            border: 1.5px solid #e2e8f0;
            border-radius: 999px;
            padding: 6px 14px;
            font-weight: 600;
            cursor: pointer
        }

        .toggle input {
            display: none
        }

        .toggle .active {
            border-color: var(--brand);
            box-shadow: 0 0 0 3px var(--brand50);
            color: var(--brand6)
        }

    .btn-success {
        background: var(--brand);
        border-color: var(--brand)
    }

        .btn-success:hover {
            background: var(--brand6)
        }

    .form-label {
        font-weight: 600
    }

    body {
        background-color: #f8f9fa;
    }

    .form-control:focus {
        box-shadow: none;
        border-color: #198754;
    }

    .btn-success {
        background-color: #198754;
        border: none;
    }

        .btn-success:hover {
            background-color: #157347;
        }

    .reset-btn {
        background-color: #fff;
        color: #00b34b;
        border: 2px solid #00b34b;
        font-weight: 600;
        border-radius: 8px;
        padding: 6px 20px;
        text-decoration: none;
    }

    .step-icon {
        font-size: 64px;
        color: #00b34b;
    }

    .three-step-card {
        transition: transform 0.3s ease;
    }

        .three-step-card:hover {
            transform: translateY(-5px);
        }

    .ui-menu .ui-menu-item-wrapper:hover,
    .ui-menu .ui-menu-item-wrapper.ui-state-active {
        background-color: #198754 !important; /* green */
        color: #fff !important;
        border: none !important;
    }

    .card-img {
        height: 300px;
        object-fit: cover;
        transition: transform .3s ease;
    }

    .card:hover .card-img {
        transform: scale(1.05);
    }

    .card-title {
        text-shadow: 0 2px 5px rgba(0,0,0,0.6);
    }

    .logo-scroller {
        overflow: hidden;
        background: #f3f6f9;
        padding: 16px 0;
    }

    .logo-track {
        display: flex;
        gap: 22px;
        width: max-content;
        animation: slide-logos 25s linear infinite;
    }

        .logo-track:hover {
            animation-play-state: paused;
        }

    .logo-card {
        width: 200px;
        height: 140px;
        background: #fff;
        border-radius: 16px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,.08);
    }

        .logo-card img {
            max-width: 90px;
            max-height: 60px;
            object-fit: contain;
            margin-bottom: 6px;
        }

        .logo-card span {
            font-size: 14px;
            font-weight: 600;
            color: #555;
        }

    /* ✅ Razor safe */
    @@keyframes slide-logos {
        from {
            transform: translateX(0);
        }

        to {
            transform: translateX(-50%);
        }
    }


    /* Make accordion background same green, remove blue border/focus */
    .faq-section .accordion-button {
        background: transparent !important;
        color: #fff !important;
        box-shadow: none !important;
        border: none !important;
        font-weight: 500;
        font-size: 1.1rem;
    }

    .faq-section {
        background: #1f7d5b;
        margin-bottom: 0 !important;
        padding-bottom: 2rem;
    }

    footer {
        background: #1f7d5b; /* same exact color */
        margin-top: 0 !important;
    }


    .faq-section .accordion-button:focus {
        box-shadow: none !important;
        border: none !important;
        outline: none !important;
    }

    .faq-section .accordion-item {
        background: transparent !important;
        border: none;
        border-bottom: 1px solid rgba(255,255,255,0.4); /* light divider like Shohoz */
    }

    .faq-section .accordion-body {
        color: rgba(255,255,255,0.75) !important;
        font-size: 0.95rem;
    }
</style>

<div class="air-hero">
    <div class="air-card">
        <div class="toggle">
            <label class="active"><input type="radio" name="tripType" value="oneway" checked /> One Way</label>
            <label><input type="radio" name="tripType" value="roundway" /> Round Way</label>
            <label><input type="radio" name="tripType" value="multicity" /> Multi City</label>
        </div>

        <form id="airSearchForm" class="row g-3 align-items-end" method="get" action="/Air/Results">
            <div class="col-lg-3">
                <label class="form-label text-muted">Flying From</label>
                <div class="input-group">
                    <span class="input-group-text bg-white border-end-0"><i class="bi bi-geo-alt-fill text-success"></i></span>
                    <input id="fromInput" name="from" class="form-control border-start-0" placeholder="Dhaka (DAC)" autocomplete="off" required />
                </div>
            </div>
            <div class="col-lg-1 d-flex justify-content-center align-items-center">
                <button class="btn btn-outline-success" type="button" id="swapBtn"><i class="bi bi-arrow-left-right"></i></button>
            </div>
            <div class="col-lg-3">
                <label class="form-label text-muted">Flying To</label>
                <div class="input-group">
                    <span class="input-group-text bg-white border-end-0"><i class="bi bi-geo-alt-fill text-success"></i></span>
                    <input id="toInput" name="to" class="form-control border-start-0" placeholder="Cox's Bazar (CXB)" autocomplete="off" required />
                </div>
            </div>
            <div class="col-lg-2">
                <label class="form-label text-muted">Journey Date</label>
                <input id="journeyDate" name="journeyDate" class="form-control" readonly required />
                <div class="small mt-1"><a href="#" id="addReturn" class="text-success fw-semibold">+ ADD RETURN TRIP</a></div>
            </div>
            <div class="col-lg-2" id="returnCol" style="display:none;">
                <label class="form-label text-muted">Return Date</label>
                <input id="returnDate" name="returnDate" class="form-control" readonly />
            </div>
            <div class="col-lg-1 d-flex align-items-end">
                <button class="btn btn-success btn-lg w-100" type="submit">SEARCH</button>
            </div>

            <div class="col-12 d-flex gap-2">
                <select name="travellers" id="travellers" class="form-select w-auto">
                    @for (int i = 1; i <= 9; i++)
                    {
                        <option value="@i">@i Traveler(s)</option>
                    }
                </select>
                <select name="cabin" id="cabin" class="form-select w-auto">
                    <option>Economy</option>
                    <option>Business</option>
                </select>
                <input type="hidden" id="tripTypeField" name="tripType" value="oneway" />
            </div>
        </form>
    </div>
</div>

<!-- ✅ 3 EASY STEPS SECTION -->
<div class="text-center my-5">
    <h2 class="fw-bold text-success">Buy tickets <span class="text-dark">in 3 easy steps</span></h2>

    <div class="row justify-content-center mt-5">
        <!-- Step 1 -->
        <div class="col-md-3 col-10 text-center three-step-card">
            <div class="step-icon mb-3">
                <img src="/Admin/images/Booking a Bus Trip.png" alt="Search" class="img-fluid" style="height: 120px;" />
            </div>
            <h4 class="fw-bold">Search</h4>
            <p>Choose your origin, destination, journey dates and search for buses</p>
        </div>

        <!-- Step 2 -->
        <div class="col-md-3 col-10 text-center three-step-card">
            <div class="step-icon mb-3">
                <img src="/Admin/images/select.svg" alt="Select" class="img-fluid" style="height: 120px;" />
            </div>
            <h4 class="fw-bold">Select</h4>
            <p>Select your desired trip and choose your seats</p>
        </div>

        <!-- Step 3 -->
        <div class="col-md-3 col-10 text-center three-step-card">
            <div class="step-icon mb-3">
                <img src="/Admin/images/pay.svg" alt="Pay" class="img-fluid" style="height: 120px;" />
            </div>
            <h4 class="fw-bold">Pay</h4>
            <p>Pay by bank cards or mobile banking</p>
        </div>
    </div>
</div>
<!-- Trending Destinations -->
<div class="container my-5">
    <h2 class="fw-bold text-center mb-4">
        Discover <span class="text-success">Trending Destinations</span>
    </h2>

    <div class="row g-4">
        <!-- Chittagong -->
        <div class="col-12 col-md-6">
            <div class="card bg-dark text-white border-0 rounded-4 overflow-hidden">
                <img src="/Admin/images/Chittagong-1440x600.jpg" class="card-img" alt="Chittagong">
                <div class="card-img-overlay d-flex align-items-end p-3">
                    <h5 class="card-title fw-bold">Chittagong</h5>
                </div>
            </div>
        </div>

        <!-- Dhaka -->
        <div class="col-12 col-md-6">
            <div class="card bg-dark text-white border-0 rounded-4 overflow-hidden">
                <img src="/Admin/images/Dhaka-1440x600.jpg" class="card-img" alt="Dhaka">
                <div class="card-img-overlay d-flex align-items-end p-3">
                    <h5 class="card-title fw-bold">Dhaka</h5>
                </div>
            </div>
        </div>

        <!-- Rajshahi -->
        <div class="col-12 col-md-4">
            <div class="card bg-dark text-white border-0 rounded-4 overflow-hidden">
                <img src="/Admin/images/Rajshahi-1440x600.webp" class="card-img" alt="Rajshahi">
                <div class="card-img-overlay d-flex align-items-end p-3">
                    <h5 class="card-title fw-bold">Rajshahi</h5>
                </div>
            </div>
        </div>

        <!-- Rangpur -->
        <div class="col-12 col-md-4">
            <div class="card bg-dark text-white border-0 rounded-4 overflow-hidden">
                <img src="/Admin/images/Rangpur-1440x600.webp" class="card-img" alt="Rangpur">
                <div class="card-img-overlay d-flex align-items-end p-3">
                    <h5 class="card-title fw-bold">Rangpur</h5>
                </div>
            </div>
        </div>

        <!-- Sylhet -->
        <div class="col-12 col-md-4">
            <div class="card bg-dark text-white border-0 rounded-4 overflow-hidden">
                <img src="/Admin/images/Sylhet-1440x600.jpg" class="card-img" alt="Sylhet">
                <div class="card-img-overlay d-flex align-items-end p-3">
                    <h5 class="card-title fw-bold">Sylhet</h5>
                </div>
            </div>
        </div>
    </div>
</div>
<

<!-- RiadTrip Highlights -->
<div class="container my-5 text-center">
    <h2 class="fw-bold mb-5">
        <span class="text-success">10+ Million</span> Travellers Trusted RiadTrip
    </h2>

    <div class="row g-4">
        <!-- Feature 1 -->
        <div class="col-md-4">
            <div class="p-4 h-100">
                <div class="bg-success bg-opacity-10 text-success rounded-3 d-inline-flex align-items-center justify-content-center mb-3" style="width:80px; height:80px;">
                    <i class="bi bi-bus-front fs-1"></i>
                </div>
                <h5 class="fw-bold">Largest Ticketing Platform</h5>
                <div class="d-flex justify-content-center gap-3 flex-wrap mt-3">
                    <div><span class="text-success fw-bold">250M+</span><br><small class="text-muted">tickets</small></div>
                    <div><span class="text-success fw-bold">10M+</span><br><small class="text-muted">happy users</small></div>
                    <div><span class="text-success fw-bold">3000+</span><br><small class="text-muted">routes</small></div>
                    <div><span class="text-success fw-bold">1000+</span><br><small class="text-muted">partners</small></div>
                </div>
            </div>
        </div>

        <!-- Feature 2 -->
        <div class="col-md-4">
            <div class="p-4 h-100">
                <div class="bg-success bg-opacity-10 text-success rounded-3 d-inline-flex align-items-center justify-content-center mb-3" style="width:80px; height:80px;">
                    <i class="bi bi-clock-history fs-1"></i>
                </div>
                <h5 class="fw-bold">Quick & Easy Booking</h5>
                <p class="text-muted">Skip the queues with RiadTrip! Book bus tickets online from 100+ operators nationwide. Easily browse routes and reserve seats anytime.</p>
            </div>
        </div>

        <!-- Feature 3 -->
        <div class="col-md-4">
            <div class="p-4 h-100">
                <div class="bg-success bg-opacity-10 text-success rounded-3 d-inline-flex align-items-center justify-content-center mb-3" style="width:80px; height:80px;">
                    <i class="bi bi-headset fs-1"></i>
                </div>
                <h5 class="fw-bold">Fast Customer Support</h5>
                <p class="text-muted">Quick and responsive assistance to resolve your issues without delay — because your time matters to us at RiadTrip.</p>
            </div>
        </div>
    </div>
</div>
<!-- RiadTrip FAQ (Bootstrap only) -->
<section class="faq-section text-white" style="background:#1f7d5b; margin-bottom:0; padding-bottom:2rem;">
    <div class="container">
        <div class="row g-5 align-items-start">
            <!-- Left column -->
            <div class="col-lg-5">
                <h2 class="display-5 fw-bold lh-1 mb-3">
                    Got Questions ?<br>We've Got Answers
                </h2>
                <p class="lead opacity-75 mb-4">
                    We are always happy to hear from you. If you have any questions, suggestions or opinions,
                    please do not hesitate to reach out to us.
                </p>
                <a asp-controller="Pages" asp-action="Contact" class="btn btn-light btn-lg px-4 py-3 fw-semibold">Contact Us</a>

            </div>

            <!-- Right column -->
            <div class="col-lg-7">
                <div class="accordion accordion-flush" id="faqAccordion">
                    <!-- Q1 -->
                    <div class="accordion-item bg-transparent border-0 border-bottom border-light">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed bg-transparent text-white px-0 py-4"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                How can I purchase a ticket from RiadTrip platform?
                            </button>
                        </h2>
                        <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body ps-0 text-white-50">
                                Search your route, pick a bus, choose seats, enter passenger details, and pay via card or mobile banking.
                                Your e‑ticket is sent to email/SMS instantly.
                            </div>
                        </div>
                    </div>

                    <!-- Q2 -->
                    <div class="accordion-item bg-transparent border-0 border-bottom border-light">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed bg-transparent text-white px-0 py-4"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                Is there any time frame to buy a ticket?
                            </button>
                        </h2>
                        <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body ps-0 text-white-50">
                                Online bookings are open 24/7. Some operators close sales a few hours before departure—book early for best seats.
                            </div>
                        </div>
                    </div>

                    <!-- Q3 -->
                    <div class="accordion-item bg-transparent border-0 border-bottom border-light">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed bg-transparent text-white px-0 py-4"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                What is the process of changing or cancelling a ticket?
                            </button>
                        </h2>
                        <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body ps-0 text-white-50">
                                Options depend on the operator’s policy. Go to <em>My Bookings</em>, choose the trip, then select change/cancel.
                                Fees and cut‑off times may apply.
                            </div>
                        </div>
                    </div>

                    <!-- Q4 -->
                    <div class="accordion-item bg-transparent border-0 border-bottom border-light">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed bg-transparent text-white px-0 py-4"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                How can I check RiadTrip’s offers?
                            </button>
                        </h2>
                        <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body ps-0 text-white-50">
                                Visit the Offers page or see the homepage banners. Apply the promo code at checkout to get your discount.
                            </div>
                        </div>
                    </div>

                    <!-- Q5 -->
                    <div class="accordion-item bg-transparent border-0 border-bottom border-light">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed bg-transparent text-white px-0 py-4"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                                I cancelled / operator cancelled my trip and no refund yet. What should I do?
                            </button>
                        </h2>
                        <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body ps-0 text-white-50">
                                Refunds typically take 3–7 business days depending on payment method. If delayed, contact support with your booking ID and we’ll escalate.
                            </div>
                        </div>
                    </div>

                </div><!-- /accordion -->
            </div>
        </div>
    </div>
</section>


@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        $(function(){
          $("#journeyDate").datepicker({ dateFormat:"yy-mm-dd", minDate:0,
            onSelect:function(d){ $("#returnDate").datepicker("option","minDate", new Date(d)); }});
          $("#returnDate").datepicker({ dateFormat:"yy-mm-dd", minDate:0 });

          const ac = { source:(req,res)=>$.getJSON('/Air/AirportSuggestions',{term:req.term},res), minLength:1 };
          $("#fromInput").autocomplete(ac); $("#toInput").autocomplete(ac);

          $(".toggle label").on("click", function(){
            $(".toggle label").removeClass("active"); $(this).addClass("active");
            const val = $(this).find("input").val(); $("#tripTypeField").val(val);
            $("#returnCol").toggle(val==="roundway"); $("#addReturn").toggle(val!=="roundway");
          });
          $("#addReturn").on("click", e=>{ e.preventDefault(); $(".toggle label").eq(1).click(); });

          $("#swapBtn").on("click", function(){ const a=$("#fromInput").val(); $("#fromInput").val($("#toInput").val()); $("#toInput").val(a); });

          $("#airSearchForm").on("submit", function(e){
            e.preventDefault();
            const from=$("#fromInput").val().trim(), to=$("#toInput").val().trim(), jd=$("#journeyDate").val();
            const trip=$("#tripTypeField").val(), rd=$("#returnDate").val();
            if(!from||!to||!jd){ Swal.fire('Error','Fill From, To & Journey Date','error'); return; }
            if(trip==="roundway" && !rd){ Swal.fire('Return date','Please pick return date','warning'); return; }
            Swal.fire({title:'Searching...',text:'Fetching flights...',icon:'info',allowOutsideClick:false,didOpen:()=>Swal.showLoading()});
            setTimeout(()=>{
              const p=new URLSearchParams({from,to,journeyDate:jd,tripType:trip,travellers:$("#travellers").val(),cabin:$("#cabin").val()});
              if(trip==="roundway") p.set('returnDate', rd);
              window.location='/Air/Results?'+p.toString();
            },900);
          });
        });
    </script>
}
