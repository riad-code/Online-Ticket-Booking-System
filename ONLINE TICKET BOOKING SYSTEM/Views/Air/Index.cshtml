@model IEnumerable<ONLINE_TICKET_BOOKING_SYSTEM.Models.Air.Airport>
@{
    ViewData["Title"] = "Air Tickets";
    Layout = "_Layout";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" />
<style>
    :root {
        --brand: #1faa00;
        --brand6: #148a00;
        --brand50: #e7f6e8;
    }

    .air-hero {
        position: relative;
        background: url('/Admin/images/air-hero.jpg') center/cover no-repeat;
        height: 420px
    }

    .air-hero {
        position: relative;
    }

        .air-hero:after {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,.35);
            z-index: 1; /* put the overlay UNDER the card */
            pointer-events: none; /* overlay never catches clicks */
        }

    .air-card {
        position: absolute;
        left: 50%;
        bottom: 24px;
        transform: translateX(-50%);
        width: min(1100px,92%);
        background: #fff;
        border-radius: 22px;
        box-shadow: 0 10px 30px rgba(0,0,0,.15);
        padding: 18px 18px 22px;
        border: 1px solid #eef2ff;
        z-index: 2; /* ensure the card is above the overlay */
    }


    .toggle {
        display: flex;
        gap: 18px;
        margin-bottom: 10px
    }

        .toggle label {
            border: 1.5px solid #e2e8f0;
            border-radius: 999px;
            padding: 6px 14px;
            font-weight: 600;
            cursor: pointer
        }

        .toggle input {
            display: none
        }

        .toggle .active {
            border-color: var(--brand);
            box-shadow: 0 0 0 3px var(--brand50);
            color: var(--brand6)
        }

    .btn-success {
        background: var(--brand);
        border-color: var(--brand)
    }

        .btn-success:hover {
            background: var(--brand6)
        }

    .form-label {
        font-weight: 600
    }

    body {
        background-color: #f8f9fa;
    }

    .form-control:focus {
        box-shadow: none;
        border-color: #198754;
    }

    .btn-success {
        background-color: #198754;
        border: none;
    }

        .btn-success:hover {
            background-color: #157347;
        }
   
    .air-card .search-btn {
        white-space: nowrap;
        font-size: 1rem; 
        padding: .55rem .75rem; 
    }

    .destinations-gap {
        margin-bottom: 48px; 
    }

    .reset-btn {
        background-color: #fff;
        color: #00b34b;
        border: 2px solid #00b34b;
        font-weight: 600;
        border-radius: 8px;
        padding: 6px 20px;
        text-decoration: none;
    }

    .step-icon {
        font-size: 64px;
        color: #00b34b;
    }

    .three-step-card {
        transition: transform 0.3s ease;
    }

        .three-step-card:hover {
            transform: translateY(-5px);
        }

    .ui-menu .ui-menu-item-wrapper:hover,
    .ui-menu .ui-menu-item-wrapper.ui-state-active {
        background-color: #198754 !important; /* green */
        color: #fff !important;
        border: none !important;
    }

    .card-img {
        height: 300px;
        object-fit: cover;
        transition: transform .3s ease;
    }

    .card:hover .card-img {
        transform: scale(1.05);
    }

    .card-title {
        text-shadow: 0 2px 5px rgba(0,0,0,0.6);
    }

    .logo-scroller {
        overflow: hidden;
        background: #f3f6f9;
        padding: 16px 0;
    }

    .logo-track {
        display: flex;
        gap: 22px;
        width: max-content;
        animation: slide-logos 25s linear infinite;
    }

        .logo-track:hover {
            animation-play-state: paused;
        }

    .logo-card {
        width: 200px;
        height: 140px;
        background: #fff;
        border-radius: 16px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,.08);
    }

        .logo-card img {
            max-width: 90px;
            max-height: 60px;
            object-fit: contain;
            margin-bottom: 6px;
        }

        .logo-card span {
            font-size: 14px;
            font-weight: 600;
            color: #555;
        }


    /* Package cards */
    .pkg {
        position: relative;
        border-radius: 18px;
        overflow: hidden
    }

    .pkg-img {
        height: 200px;
        object-fit: cover
    }

    .badge-flag {
        position: absolute;
        top: 12px;
        left: 12px;
        background: #198754;
        color: #fff;
        padding: 6px 10px;
        border-radius: 999px;
        font-weight: 600;
        font-size: .9rem;
        z-index: 1
    }

    .pkg-topbar {
        position: absolute;
        bottom: 12px;
        left: 12px;
        right: 12px;
        display: flex;
        gap: 10px;
        justify-content: space-between;
        background: rgba(0,0,0,.55);
        color: #fff;
        border-radius: 10px;
        padding: 6px 10px;
        font-size: .9rem
    }

    /* Destination tiles */
    .dest {
        position: relative;
        border-radius: 24px;
        overflow: hidden;
        height: 300px;
        display: flex;
        align-items: flex-end
    }

        .dest img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform .3s ease
        }

        .dest:hover img {
            transform: scale(1.05)
        }

        .dest span {
            position: relative;
            z-index: 1;
            margin: 12px;
            font-size: 1.4rem;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 3px 10px rgba(0,0,0,.6)
        }


    /* Make accordion background same green, remove blue border/focus */
    .faq-section .accordion-button {
        background: transparent !important;
        color: #fff !important;
        box-shadow: none !important;
        border: none !important;
        font-weight: 500;
        font-size: 1.1rem;
    }

    .faq-section {
        background: #1f7d5b;
        margin-bottom: 0 !important;
        padding-bottom: 2rem;
    }

    footer {
        background: #1f7d5b; /* same exact color */
        margin-top: 0 !important;
    }


    .faq-section .accordion-button:focus {
        box-shadow: none !important;
        border: none !important;
        outline: none !important;
    }

    .faq-section .accordion-item {
        background: transparent !important;
        border: none;
        border-bottom: 1px solid rgba(255,255,255,0.4); /* light divider like Shohoz */
    }

    .faq-section .accordion-body {
        color: rgba(255,255,255,0.75) !important;
        font-size: 0.95rem;
    }

    .faq-section {
        margin-top: 60px !important; 
    }
</style>

<div class="air-hero">
    <div class="air-card">
        <div class="toggle">
            <label class="active"><input type="radio" name="tripType" value="oneway" checked /> One Way</label>
            <label><input type="radio" name="tripType" value="roundway" /> Round Way</label>
          
        </div>

        <form id="airSearchForm" class="row g-3 align-items-end" method="get" action="/Air/Results">
            <div class="col-lg-3">
                <label class="form-label text-muted">Flying From</label>
                <div class="input-group">
                    <span class="input-group-text bg-white border-end-0"><i class="bi bi-geo-alt-fill text-success"></i></span>
                    <input id="fromInput" name="from" class="form-control border-start-0" placeholder="Dhaka (DAC)" autocomplete="off" required />
                </div>
            </div>
            <div class="col-lg-1 d-flex justify-content-center align-items-center">
                <button class="btn btn-outline-success" type="button" id="swapBtn"><i class="bi bi-arrow-left-right"></i></button>
            </div>
            <div class="col-lg-3">
                <label class="form-label text-muted">Flying To</label>
                <div class="input-group">
                    <span class="input-group-text bg-white border-end-0"><i class="bi bi-geo-alt-fill text-success"></i></span>
                    <input id="toInput" name="to" class="form-control border-start-0" placeholder="Cox's Bazar (CXB)" autocomplete="off" required />
                </div>
            </div>
            <div class="col-lg-2">
                <label class="form-label text-muted">Journey Date</label>
                <input id="journeyDate" name="journeyDate" class="form-control" readonly required />
                <div class="small mt-1"><a href="#" id="addReturn" class="text-success fw-semibold">+ ADD RETURN TRIP</a></div>
            </div>
            <div class="col-lg-2" id="returnCol" style="display:none;">
                <label class="form-label text-muted">Return Date</label>
                <input id="returnDate" name="returnDate" class="form-control" readonly />
            </div>
            <div class="col-lg-1 d-flex align-items-end">
                <button class="btn btn-success btn-lg w-100 search-btn" type="submit">SEARCH</button>

            </div>

            <div class="col-12 d-flex gap-2">
                <select name="travellers" id="travellers" class="form-select w-auto">
                    @for (int i = 1; i <= 9; i++)
                    {
                        <option value="@i">@i Traveler(s)</option>
                    }
                </select>
                <select name="cabin" id="cabin" class="form-select w-auto">
                    <option>Economy</option>
                    <option>Business</option>
                </select>
                <input type="hidden" id="tripTypeField" name="tripType" value="oneway" />
            </div>
        </form>
    </div>
</div>

<!-- ✅ 3 EASY STEPS SECTION -->
<div class="text-center my-5">
    <h2 class="fw-bold text-success">Buy tickets <span class="text-dark">in 3 easy steps</span></h2>

    <div class="row justify-content-center mt-5">
        <!-- Step 1 -->
        <div class="col-md-3 col-10 text-center three-step-card">
            <div class="step-icon mb-3">
                <img src="/Admin/images/plane.png" alt="Search" class="img-fluid" style="height: 120px;" />
            </div>
            <h4 class="fw-bold">Search</h4>
            <p>Choose your origin, destination, journey dates and search for buses</p>
        </div>

        <!-- Step 2 -->
        <div class="col-md-3 col-10 text-center three-step-card">
            <div class="step-icon mb-3">
                <img src="/Admin/images/select.svg" alt="Select" class="img-fluid" style="height: 120px;" />
            </div>
            <h4 class="fw-bold">Select</h4>
            <p>Select your desired trip and choose your seats</p>
        </div>

        <!-- Step 3 -->
        <div class="col-md-3 col-10 text-center three-step-card">
            <div class="step-icon mb-3">
                <img src="/Admin/images/pay.svg" alt="Pay" class="img-fluid" style="height: 120px;" />
            </div>
            <h4 class="fw-bold">Pay</h4>
            <p>Pay by bank cards or mobile banking</p>
        </div>
    </div>
</div>
<!-- Popular Packages (like picture-1) -->
<div class="container my-5">
    <h2 class="fw-bold mb-4 text-center">Popular Packages</h2>
    <div class="row g-4">

        <!-- Card 1 -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="pkg card h-100 border-0 shadow-sm">
                <div class="badge-flag"><i class="bi bi-geo-alt-fill me-1"></i>Nepal</div>
                <img src="/Admin/images/nepal.jpg" class="card-img-top pkg-img" alt="Nepal" />
                <div class="pkg-topbar">
                    <div><i class="bi bi-alarm me-1"></i>5 Days, 4 Nights</div>
                    <div><i class="bi bi-people me-1"></i>2 People</div>
                </div>
                <div class="card-body">
                    <h6 class="mb-1">Dual City Adventure: 5 Days, 4 Nights in Kathmandu and Pokhara</h6>
                    <div class="text-success fw-bold fs-5">BDT 25,000</div>
                    <div class="text-muted small">Per person</div>
                </div>
            </div>
        </div>

        <!-- Card 2 -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="pkg card h-100 border-0 shadow-sm">
                <div class="badge-flag"><i class="bi bi-geo-alt-fill me-1"></i>Indonesia</div>
                <img src="/Admin/images/indunesia.jpg" class="card-img-top pkg-img" alt="Indonesia" />
                <div class="pkg-topbar">
                    <div><i class="bi bi-alarm me-1"></i>4 Days, 3 Nights</div>
                    <div><i class="bi bi-people me-1"></i>2 People</div>
                </div>
                <div class="card-body">
                    <h6 class="mb-1">4 Days, 3 Nights Paradise Gateway Bali</h6>
                    <div class="text-success fw-bold fs-5">BDT 11,500</div>
                    <div class="text-muted small">Per person</div>
                </div>
            </div>
        </div>

        <!-- Card 3 -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="pkg card h-100 border-0 shadow-sm">
                <div class="badge-flag"><i class="bi bi-geo-alt-fill me-1"></i>Malaysia</div>
                <img src="/Admin/images/malaysia.jpg" class="card-img-top pkg-img" alt="Malaysia" />
                <div class="pkg-topbar">
                    <div><i class="bi bi-alarm me-1"></i>1 Day, 1 Night</div>
                    <div><i class="bi bi-people me-1"></i>2–8 People</div>
                </div>
                <div class="card-body">
                    <h6 class="mb-1">5 Days 4 Nights of Urban Adventure (Singapore & Kuala Lumpur)</h6>
                    <div class="text-success fw-bold fs-5">BDT 23,500</div>
                    <div class="text-muted small">Per person</div>
                </div>
            </div>
        </div>

        <!-- Card 4 -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="pkg card h-100 border-0 shadow-sm">
                <div class="badge-flag"><i class="bi bi-geo-alt-fill me-1"></i>Singapore</div>
                <img src="/Admin/images/singapur.jpg" class="card-img-top pkg-img" alt="Singapore" />
                <div class="pkg-topbar">
                    <div><i class="bi bi-alarm me-1"></i>3 Days, 2 Nights</div>
                    <div><i class="bi bi-people me-1"></i>2 People</div>
                </div>
                <div class="card-body">
                    <h6 class="mb-1">Explore Singapore 3 Days 2 Nights Adventure</h6>
                    <div class="text-success fw-bold fs-5">BDT 19,500</div>
                    <div class="text-muted small">Per person</div>
                </div>
            </div>
        </div>

        <!-- Card 5 -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="pkg card h-100 border-0 shadow-sm">
                <div class="badge-flag"><i class="bi bi-geo-alt-fill me-1"></i>Thailand</div>
                <img src="/Admin/images/thailand.jpg" class="card-img-top pkg-img" alt="Thailand" />
                <div class="pkg-topbar">
                    <div><i class="bi bi-alarm me-1"></i>3 Days, 2 Nights</div>
                    <div><i class="bi bi-people me-1"></i>1–2 People</div>
                </div>
                <div class="card-body">
                    <h6 class="mb-1">Bangkok 3 Days 2 Nights Couple Package</h6>
                    <div class="text-success fw-bold fs-5">BDT 10,500</div>
                    <div class="text-muted small">Per person</div>
                </div>
            </div>
        </div>

        <!-- Card 6 (extra sample) -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="pkg card h-100 border-0 shadow-sm">
                <div class="badge-flag"><i class="bi bi-geo-alt-fill me-1"></i>Malaysia</div>
                <img src="/Admin/images/kualalumpur.jpg" class="card-img-top pkg-img" alt="KL & SG" />
                <div class="pkg-topbar">
                    <div><i class="bi bi-alarm me-1"></i>5 Days, 4 Nights</div>
                    <div><i class="bi bi-people me-1"></i>2–6 People</div>
                </div>
                <div class="card-body">
                    <h6 class="mb-1">Kuala Lumpur + Singapore Combo Tour</h6>
                    <div class="text-success fw-bold fs-5">BDT 23,900</div>
                    <div class="text-muted small">Per person</div>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- Popular Destination (like picture-2) -->
<div class="container my-5 destinations-gap "> 
    <h2 class="fw-bold text-center mb-4">Popular Destination</h2>
    <div class="row g-4">
        <div class="col-6 col-md-4 col-xl-2">
            <div class="dest">
                <img src="/Admin/images/indunesia.jpg" alt="Indonesia" />
                <span>Indonesia</span>
            </div>
        </div>
        <div class="col-6 col-md-4 col-xl-2">
            <div class="dest">
                <img src="/Admin/images/singapur.jpg" alt="Singapore" />
                <span>Singapore</span>
            </div>
        </div>
        <div class="col-6 col-md-4 col-xl-2">
            <div class="dest">
                <img src="/Admin/images/malaysia.jpg" alt="Malaysia" />
                <span>Malaysia</span>
            </div>
        </div>
        <div class="col-6 col-md-4 col-xl-2">
            <div class="dest">
                <img src="/Admin/images/nepal.jpg" alt="Nepal" />
                <span>Nepal</span>
            </div>
        </div>
        <div class="col-6 col-md-4 col-xl-2">
            <div class="dest">
                <img src="/Admin/images/thailand.jpg" alt="Thailand" />
                <span>Thailand</span>
            </div>
        </div>
        <div class="col-6 col-md-4 col-xl-2">
            <div class="dest">
                <img src="/Admin/images/bali.jpg" alt="Bali" />
                <span>Bali</span>
            </div>
        </div>
    </div>
</div>
<!-- RiadTrip FAQ (Bootstrap only) -->
<section class="faq-section text-white" style="background:#1f7d5b; margin-bottom: 0; margin-top: 10px; padding-bottom:2rem;">
    <div class="container">
        <div class="row g-5 align-items-start">
            <!-- Left column -->
            <div class="col-lg-5">
                <h2 class="display-5 fw-bold lh-1 mb-3">
                    Got Questions ?<br>We've Got Answers
                </h2>
                <p class="lead opacity-75 mb-4">
                    We are always happy to hear from you. If you have any questions, suggestions or opinions,
                    please do not hesitate to reach out to us.
                </p>
                <a asp-controller="Pages" asp-action="Contact" class="btn btn-light btn-lg px-4 py-3 fw-semibold">Contact Us</a>

            </div>

            <!-- Right column -->
            <div class="col-lg-7">
                <div class="accordion accordion-flush" id="faqAccordion">
                    <!-- Q1 -->
                    <div class="accordion-item bg-transparent border-0 border-bottom border-light">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed bg-transparent text-white px-0 py-4"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                How can I purchase a ticket from RiadTrip platform?
                            </button>
                        </h2>
                        <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body ps-0 text-white-50">
                                Search your route, pick a bus, choose seats, enter passenger details, and pay via card or mobile banking.
                                Your e‑ticket is sent to email/SMS instantly.
                            </div>
                        </div>
                    </div>

                    <!-- Q2 -->
                    <div class="accordion-item bg-transparent border-0 border-bottom border-light">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed bg-transparent text-white px-0 py-4"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                Is there any time frame to buy a ticket?
                            </button>
                        </h2>
                        <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body ps-0 text-white-50">
                                Online bookings are open 24/7. Some operators close sales a few hours before departure—book early for best seats.
                            </div>
                        </div>
                    </div>

                    <!-- Q3 -->
                    <div class="accordion-item bg-transparent border-0 border-bottom border-light">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed bg-transparent text-white px-0 py-4"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                What is the process of changing or cancelling a ticket?
                            </button>
                        </h2>
                        <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body ps-0 text-white-50">
                                Options depend on the operator’s policy. Go to <em>My Bookings</em>, choose the trip, then select change/cancel.
                                Fees and cut‑off times may apply.
                            </div>
                        </div>
                    </div>

                    <!-- Q4 -->
                    <div class="accordion-item bg-transparent border-0 border-bottom border-light">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed bg-transparent text-white px-0 py-4"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                How can I check RiadTrip’s offers?
                            </button>
                        </h2>
                        <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body ps-0 text-white-50">
                                Visit the Offers page or see the homepage banners. Apply the promo code at checkout to get your discount.
                            </div>
                        </div>
                    </div>

                    <!-- Q5 -->
                    <div class="accordion-item bg-transparent border-0 border-bottom border-light">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed bg-transparent text-white px-0 py-4"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                                I cancelled / operator cancelled my trip and no refund yet. What should I do?
                            </button>
                        </h2>
                        <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                            <div class="accordion-body ps-0 text-white-50">
                                Refunds typically take 3–7 business days depending on payment method. If delayed, contact support with your booking ID and we’ll escalate.
                            </div>
                        </div>
                    </div>

                </div><!-- /accordion -->
            </div>
        </div>
    </div>
</section>


@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        $(function(){
          $("#journeyDate").datepicker({ dateFormat:"yy-mm-dd", minDate:0,
            onSelect:function(d){ $("#returnDate").datepicker("option","minDate", new Date(d)); }});
          $("#returnDate").datepicker({ dateFormat:"yy-mm-dd", minDate:0 });

          const ac = { source:(req,res)=>$.getJSON('/Air/AirportSuggestions',{term:req.term},res), minLength:1 };
          $("#fromInput").autocomplete(ac); $("#toInput").autocomplete(ac);

          $(".toggle label").on("click", function(){
            $(".toggle label").removeClass("active"); $(this).addClass("active");
            const val = $(this).find("input").val(); $("#tripTypeField").val(val);
            $("#returnCol").toggle(val==="roundway"); $("#addReturn").toggle(val!=="roundway");
          });
          $("#addReturn").on("click", e=>{ e.preventDefault(); $(".toggle label").eq(1).click(); });

          $("#swapBtn").on("click", function(){ const a=$("#fromInput").val(); $("#fromInput").val($("#toInput").val()); $("#toInput").val(a); });

          $("#airSearchForm").on("submit", function(e){
            e.preventDefault();
            const from=$("#fromInput").val().trim(), to=$("#toInput").val().trim(), jd=$("#journeyDate").val();
            const trip=$("#tripTypeField").val(), rd=$("#returnDate").val();
            if(!from||!to||!jd){ Swal.fire('Error','Fill From, To & Journey Date','error'); return; }
            if(trip==="roundway" && !rd){ Swal.fire('Return date','Please pick return date','warning'); return; }
            Swal.fire({title:'Searching...',text:'Fetching flights...',icon:'info',allowOutsideClick:false,didOpen:()=>Swal.showLoading()});
            setTimeout(()=>{
              const p=new URLSearchParams({from,to,journeyDate:jd,tripType:trip,travellers:$("#travellers").val(),cabin:$("#cabin").val()});
              if(trip==="roundway") p.set('returnDate', rd);
              window.location='/Air/Results?'+p.toString();
            },900);
          });
        });
    </script>
}
